<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>Building Dotnet Diagnostics - </title>

  <meta name="description" content="I&rsquo;m getting an error trying to build dotnet/diagnostics:
root@85bd9fba8925:/app/diagnostics# dotnet build A compatible installed .NET Core SDK for global.json version [3.">
  <meta name="author" content="Willem van Ketwich"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Will\u0027s Blog",
    
    "url": "http:\/\/me.wvk.au\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/me.wvk.au\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "http:\/\/me.wvk.au\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "http:\/\/me.wvk.au\/posts\/building-dotnet-diagnostics\/",
          "name": "Building dotnet diagnostics"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Willem van Ketwich"
  },
  "headline": "Building Dotnet Diagnostics",
  "description" : "I\u0026rsquo;m getting an error trying to build dotnet\/diagnostics:\nroot@85bd9fba8925:\/app\/diagnostics# dotnet build A compatible installed .NET Core SDK for global.json version [3.",
  "inLanguage" : "en",
  "wordCount":  2148 ,
  "datePublished" : "2020-05-31T14:18:15",
  "dateModified" : "2020-05-31T14:18:15",
  "image" : "http:\/\/me.wvk.au\/",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "http:\/\/me.wvk.au\/posts\/building-dotnet-diagnostics\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "http:\/\/me.wvk.au\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "http:\/\/me.wvk.au\/",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Building Dotnet Diagnostics" />
<meta property="og:description" content="I&rsquo;m getting an error trying to build dotnet/diagnostics:
root@85bd9fba8925:/app/diagnostics# dotnet build A compatible installed .NET Core SDK for global.json version [3.">
<meta property="og:url" content="http://me.wvk.au/posts/building-dotnet-diagnostics/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Will&#39;s Blog" />

  <meta name="twitter:title" content="Building Dotnet Diagnostics" />
  <meta name="twitter:description" content="I&rsquo;m getting an error trying to build dotnet/diagnostics:
root@85bd9fba8925:/app/diagnostics# dotnet build A compatible installed .NET Core SDK for global.json version [3.">
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@wilvk" />
  <meta name="twitter:creator" content="@wilvk" />
  <meta name="generator" content="Hugo 0.124.1">
  <link rel="alternate" href="http://me.wvk.au/index.xml" type="application/rss+xml" title="Will&#39;s Blog"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="http://me.wvk.au/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="http://me.wvk.au/css/syntax.css" /><link rel="stylesheet" href="http://me.wvk.au/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">

<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-122351489-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://me.wvk.au/">Will&#39;s Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="blog" href="http://me.wvk.au/posts/">blog</a>
            </li>
          
        
          
            <li>
              <a title="about" href="http://me.wvk.au/about/">about</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Building Dotnet Diagnostics</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>I&rsquo;m getting an error trying to build <code>dotnet/diagnostics</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# dotnet build
</span></span><span style="display:flex;"><span>A compatible installed .NET Core SDK <span style="color:#66d9ef">for</span> global.json version <span style="color:#f92672">[</span>3.0.100<span style="color:#f92672">]</span> from <span style="color:#f92672">[</span>/app/diagnostics/global.json<span style="color:#f92672">]</span> was not found
</span></span><span style="display:flex;"><span>Install the <span style="color:#f92672">[</span>3.0.100<span style="color:#f92672">]</span> .NET Core SDK or update <span style="color:#f92672">[</span>/app/diagnostics/global.json<span style="color:#f92672">]</span> with an installed .NET Core SDK:
</span></span><span style="display:flex;"><span>  3.1.200-preview-014999 <span style="color:#f92672">[</span>/app/sdk/.dotnet/sdk<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Hmmm. ok, let&rsquo;s look at that global.json:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# cat /app/diagnostics/global.json
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;sdk&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;3.0.100&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;tools&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;dotnet&#34;</span>: <span style="color:#e6db74">&#34;3.0.100&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;msbuild-sdks&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Microsoft.DotNet.Arcade.Sdk&#34;</span>: <span style="color:#e6db74">&#34;1.0.0-beta.19309.1&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Ok, so it needs sdk <code>3.0.100</code>. Let&rsquo;s look at our sdk source tag:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# git branch -vva
</span></span><span style="display:flex;"><span>  * <span style="color:#f92672">(</span>HEAD detached at v3.1.201<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      71a6432 Update branding to 3.1.201 servicing <span style="color:#f92672">(</span><span style="color:#75715e">#10782)</span>
</span></span><span style="display:flex;"><span>  master
</span></span><span style="display:flex;"><span>      77b5b6b <span style="color:#f92672">[</span>origin/master<span style="color:#f92672">]</span> Update dependencies from https://github.com/dotnet/aspnetcore build 20200423.13 <span style="color:#f92672">(</span><span style="color:#75715e">#11404)</span>
</span></span><span style="display:flex;"><span>  remotes/origin/HEAD -&gt; origin/master
</span></span><span style="display:flex;"><span>  remotes/origin/ViktorHofer-VSTest-verbosity
</span></span><span style="display:flex;"><span>      6b05bc2 Change test assumption to minimum
</span></span><span style="display:flex;"><span>  remotes/origin/ViktorHofer-vstest-verbosity
</span></span><span style="display:flex;"><span>      9c50d39 Change VSTest invocation verbosity to minimal
</span></span><span style="display:flex;"><span>  remotes/origin/conflicting-transitive-content-fix
</span></span><span style="display:flex;"><span>      e2b610a Fix transitive content conflicts
</span></span><span style="display:flex;"><span>  remotes/origin/darc-master-10da8ea1-a2de-458e-ba17-131541dfc7db
</span></span><span style="display:flex;"><span>      64d8c02 Update dependencies from https://github.com/dotnet/aspnetcore build 20200423.18
</span></span></code></pre></div><p>Ah, we&rsquo;re on sdk <code>v3.1.201</code>.</p>
<p>Ok, so what branch is diagnostics on then?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# git branch -vva
</span></span><span style="display:flex;"><span>* <span style="color:#f92672">(</span>HEAD detached at 3.1.57502<span style="color:#f92672">)</span>                6767a9a Merge pull request <span style="color:#75715e">#648 from mikem8361/release/stable</span>
</span></span><span style="display:flex;"><span>  master                                      197f647 <span style="color:#f92672">[</span>origin/master<span style="color:#f92672">]</span> Servicing testing fixes <span style="color:#f92672">(</span><span style="color:#75715e">#1061)</span>
</span></span><span style="display:flex;"><span>  remotes/origin/ForStable                    b238bd3 Cross dbi <span style="color:#f92672">(</span><span style="color:#75715e">#1036)</span>
</span></span><span style="display:flex;"><span>  remotes/origin/HEAD                         -&gt; origin/master
</span></span><span style="display:flex;"><span>  remotes/origin/master                       197f647 Servicing testing fixes <span style="color:#f92672">(</span><span style="color:#75715e">#1061)</span>
</span></span><span style="display:flex;"><span>  remotes/origin/release/3.0                  0adfc03 Various fixes from master <span style="color:#f92672">(</span><span style="color:#75715e">#554)</span>
</span></span></code></pre></div><p>Strange. So, diagnostics is on <code>3.1.57502</code> but it needs sdk <code>3.0.100</code> to run.</p>
<p>Ok, so let&rsquo;s look for a tag for sdk <code>3.0.100</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# git tag
</span></span><span style="display:flex;"><span>dev15.0-rc1
</span></span><span style="display:flex;"><span>dev15.0-rc2
</span></span><span style="display:flex;"><span>dev15.0-rc3
</span></span><span style="display:flex;"><span>dev15.0-rc4
</span></span><span style="display:flex;"><span>dev15.0.0
</span></span><span style="display:flex;"><span>v
</span></span><span style="display:flex;"><span>v2.0.2
</span></span><span style="display:flex;"><span>v2.0.3
</span></span><span style="display:flex;"><span>v2.1.2
</span></span><span style="display:flex;"><span>v2.1.200
</span></span><span style="display:flex;"><span>v2.1.3
</span></span><span style="display:flex;"><span>v2.1.300
</span></span><span style="display:flex;"><span>v2.1.300-preview1-62608--07
</span></span><span style="display:flex;"><span>v2.1.4
</span></span><span style="display:flex;"><span>v2.1.510
</span></span><span style="display:flex;"><span>v2.1.607
</span></span><span style="display:flex;"><span>v2.2.110
</span></span><span style="display:flex;"><span>v2.2.207
</span></span><span style="display:flex;"><span>v3.0.100-preview3.19124.1
</span></span><span style="display:flex;"><span>v3.0.100-preview7.19354.1
</span></span><span style="display:flex;"><span>v3.0.100-preview7.19362.3
</span></span><span style="display:flex;"><span>v3.0.100-preview8.19406.1
</span></span><span style="display:flex;"><span>v3.0.100-preview9.19426.11
</span></span><span style="display:flex;"><span>v3.0.100-rc1.19458.1
</span></span><span style="display:flex;"><span>v3.0.100-rc2.19467.3
</span></span><span style="display:flex;"><span>v3.0.101
</span></span><span style="display:flex;"><span>v3.0.102
</span></span><span style="display:flex;"><span>v3.0.103
</span></span><span style="display:flex;"><span>v3.0.2
</span></span><span style="display:flex;"><span>v3.1.1
</span></span><span style="display:flex;"><span>v3.1.100-preview1.19506.1
</span></span><span style="display:flex;"><span>v3.1.100-preview2.19528.2
</span></span><span style="display:flex;"><span>v3.1.100-preview3.19553.1
</span></span><span style="display:flex;"><span>v3.1.100-rtm.19565.4
</span></span><span style="display:flex;"><span>v3.1.101
</span></span><span style="display:flex;"><span>v3.1.102
</span></span><span style="display:flex;"><span>v3.1.103
</span></span><span style="display:flex;"><span>v3.1.200
</span></span><span style="display:flex;"><span>v3.1.201
</span></span><span style="display:flex;"><span>v5.0.100-preview.2.20176.4
</span></span><span style="display:flex;"><span>v5.0.100-preview.3.20216.1
</span></span></code></pre></div><p>Hmmm.. where&rsquo;s <code>3.0.100</code>? I guess <code>v3.0.103</code> might have to do. Will this work? Let&rsquo;s check.</p>
<p>(And what happened to v4? Too close in numbering to Dotnet Framework v4.5 maybe?)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# git checkout v3.0.103
</span></span><span style="display:flex;"><span>Previous HEAD position was 71a6432... Update branding to 3.1.201 servicing <span style="color:#f92672">(</span><span style="color:#75715e">#10782)</span>
</span></span><span style="display:flex;"><span>HEAD is now at 316fbdd... <span style="color:#f92672">[</span>release/3.0.1xx<span style="color:#f92672">]</span> Update dependencies from dotnet/core-setup <span style="color:#f92672">(</span><span style="color:#75715e">#4180)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# ./build.sh
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>  Microsoft.NET.Build.Extensions.Tasks -&gt; /app/sdk/artifacts/bin/Debug/Sdks/Microsoft.NET.Build.Extensions/msbuildExtensions/Microsoft/Microsoft.NET.Build.Extensions/tools/netcoreapp2.1/Microsoft.NET.Build.Extensions.Tasks.dll
</span></span><span style="display:flex;"><span>  Microsoft.NET.Build.Extensions.Tasks -&gt; /app/sdk/artifacts/bin/Debug/Sdks/Microsoft.NET.Build.Extensions/msbuildExtensions/Microsoft/Microsoft.NET.Build.Extensions/tools/net472/Microsoft.NET.Build.Extensions.Tasks.dll
</span></span><span style="display:flex;"><span>  Microsoft.NET.Build.Extensions.Tasks.UnitTests -&gt; /app/sdk/artifacts/bin/Tests/Microsoft.NET.Build.Extensions.Tasks.UnitTests/Debug/Microsoft.NET.Build.Extensions.Tasks.UnitTests.dll
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Build succeeded.
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span> Warning<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span> Error<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Time Elapsed 00:00:34.19
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk#
</span></span></code></pre></div><p>Cool. So It builds. Let&rsquo;s make it the system dotnet sdk.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# cd .dotnet/
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk/.dotnet# chmod +x dotnet-install.sh
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk/.dotnet# ./dotnet-install.sh
</span></span><span style="display:flex;"><span>dotnet_install: Warning: Unable to locate zlib. Probable prerequisite missing; install zlib.
</span></span><span style="display:flex;"><span>dotnet-install: .NET Core SDK version 3.1.300 is already installed.
</span></span><span style="display:flex;"><span>dotnet-install: Adding to current process PATH: <span style="color:#e6db74">`</span>/root/.dotnet<span style="color:#e6db74">`</span>. Note: This change will be visible only when sourcing script.
</span></span><span style="display:flex;"><span>dotnet-install: Installation finished successfully.
</span></span></code></pre></div><p>Ok, and what version of dotnet do we have now?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk/.dotnet# dotnet --list-sdks
</span></span><span style="display:flex;"><span>3.0.103 <span style="color:#f92672">[</span>/app/sdk/.dotnet/sdk<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>3.1.200-preview-014999 <span style="color:#f92672">[</span>/app/sdk/.dotnet/sdk<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Cool. So it looks like it&rsquo;s listed there now. Great.</p>
<p>So let&rsquo;s try  building diagnostics again.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# ./build.sh
</span></span><span style="display:flex;"><span>  Restore completed in 19.83 ms <span style="color:#66d9ef">for</span> /root/.nuget/packages/microsoft.dotnet.arcade.sdk/1.0.0-beta.19309.1/tools/Tools.proj.
</span></span><span style="display:flex;"><span>  Restore completed in 9.25 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.DebugServices/Microsoft.Diagnostics.DebugServices.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 9.72 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.TestHelpers/Microsoft.Diagnostics.TestHelpers.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 9.82 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Tools.RuntimeClient/Microsoft.Diagnostics.Tools.RuntimeClient.
</span></span><span style="display:flex;"><span>csproj.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> 89%<span style="color:#f92672">]</span> Linking CXX shared library libsos.so
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>100%<span style="color:#f92672">]</span> Built target sos
</span></span><span style="display:flex;"><span>Install the project...
</span></span><span style="display:flex;"><span>-- Install configuration: <span style="color:#e6db74">&#34;DEBUG&#34;</span>
</span></span><span style="display:flex;"><span>-- Installing: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./libsosplugin.so
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./SOS.NETCore.dll
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./SOS.NETCore.pdb
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./Microsoft.FileFormats.dll
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./Microsoft.SymbolStore.dll
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./System.Reflection.Metadata.dll
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./System.Collections.Immutable.dll
</span></span><span style="display:flex;"><span>-- Installing: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./libsos.so
</span></span><span style="display:flex;"><span>-- Up-to-date: /app/diagnostics/artifacts/bin/Linux.x64.Debug/./sosdocsunix.txt
</span></span><span style="display:flex;"><span>/app/diagnostics
</span></span><span style="display:flex;"><span>Copied SOS to /app/diagnostics/artifacts/bin/dotnet-sos/Debug/netcoreapp2.1/publish/linux-x64
</span></span><span style="display:flex;"><span>Copied SOS to /app/diagnostics/artifacts/bin/dotnet-dump/Debug/netcoreapp2.1/publish/linux-x64
</span></span><span style="display:flex;"><span>BUILD: Repo sucessfully built.
</span></span><span style="display:flex;"><span>BUILD: Product binaries are available at /app/diagnostics/artifacts/bin/Linux.x64.Debug
</span></span></code></pre></div><p>Let&rsquo;s try our dotnet build again.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# dotnet build
</span></span><span style="display:flex;"><span>Microsoft <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> Build Engine version 16.3.2+e481bbf88 <span style="color:#66d9ef">for</span> .NET Core
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span> Microsoft Corporation. All rights reserved.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MSBUILD : error MSB1011: Specify which project or solution file to use because this folder contains more than one project or solution file.
</span></span></code></pre></div><p>Ok, well that looks better than last time. Let&rsquo;s specify the solution as well this time.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# dotnet build ./diagnostics.sln
</span></span><span style="display:flex;"><span>Microsoft <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> Build Engine version 16.3.2+e481bbf88 <span style="color:#66d9ef">for</span> .NET Core
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>C<span style="color:#f92672">)</span> Microsoft Corporation. All rights reserved.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Restore completed in 16.26 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.TestHelpers/Microsoft.Diagnostics.TestHelpers.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 16.23 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Tools.RuntimeClient/Microsoft.Diagnostics.Tools.RuntimeClient.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 16.23 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.DebugServices/Microsoft.Diagnostics.DebugServices.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 16.23 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Repl/Microsoft.Diagnostics.Repl.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 0.79 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/SOS/SOS.Package/SOS.Package.csproj.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Microsoft.Diagnostics.Repl -&gt; /app/diagnostics/artifacts/bin/Microsoft.Diagnostics.Repl/Debug/netstandard2.0/Microsoft.Diagnostics.Repl.dll
</span></span><span style="display:flex;"><span>  SOS.Hosting -&gt; /app/diagnostics/artifacts/bin/SOS.Hosting/Debug/netstandard2.0/SOS.Hosting.dll
</span></span><span style="display:flex;"><span>  dotnet-dump -&gt; /app/diagnostics/artifacts/bin/dotnet-dump/Debug/netcoreapp2.1/dotnet-dump.dll
</span></span><span style="display:flex;"><span>  dotnet-counters -&gt; /app/diagnostics/artifacts/bin/dotnet-counters/Debug/netcoreapp2.1/dotnet-counters.dll
</span></span><span style="display:flex;"><span>  DotnetCounters.UnitTests -&gt; /app/diagnostics/artifacts/bin/DotnetCounters.UnitTests/Debug/netcoreapp3.0/DotnetCounters.UnitTests.dll
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Build succeeded.
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span> Warning<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span> Error<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Time Elapsed 00:00:03.74
</span></span></code></pre></div><p>And I think it&rsquo;s working now. That wasn&rsquo;t too difficult, now, was it?</p>
<p>Well, let&rsquo;s run our tests, just to be sure.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# ./build.sh --test
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Restore completed in 17.87 ms <span style="color:#66d9ef">for</span> /root/.nuget/packages/microsoft.dotnet.arcade.sdk/1.0.0-beta.19309.1/tools/Tools.proj.
</span></span><span style="display:flex;"><span>  Restore completed in 189.66 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Tools.RuntimeClient/Microsoft.Diagnostics.Tools.RuntimeClien
</span></span><span style="display:flex;"><span>t.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 189.81 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Repl/Microsoft.Diagnostics.Repl.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 189.77 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.TestHelpers/Microsoft.Diagnostics.TestHelpers.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 189.6 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.DebugServices/Microsoft.Diagnostics.DebugServices.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 17.88 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/SOS/SOS.Package/SOS.Package.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 22.99 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/SOS/SOS.InstallHelper/SOS.InstallHelper.csproj.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Tests succeeded: /app/diagnostics/artifacts/bin/DotnetTrace.UnitTests/Debug/netcoreapp3.0/DotnetTrace.UnitTests.dll <span style="color:#f92672">[</span>netcoreapp3.0|x64<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Tests succeeded: /app/diagnostics/artifacts/bin/DotnetCounters.UnitTests/Debug/netcoreapp3.0/DotnetCounters.UnitTests.dll <span style="color:#f92672">[</span>netcoreapp3.0|x64<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Tests succeeded: /app/diagnostics/artifacts/bin/EventPipe.UnitTests/Debug/netcoreapp3.0/EventPipe.UnitTests.dll <span style="color:#f92672">[</span>netcoreapp3.0|x64<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>XUnit : error : Tests failed: /app/diagnostics/artifacts/TestResults/Debug/SOS.UnitTests_netcoreapp2.0_x64.html <span style="color:#f92672">[</span>netcoreapp2.0|x64<span style="color:#f92672">]</span> ...
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>/app/diagnostics/src/SOS/SOS.UnitTests/SOS.UnitTests.csproj<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Build FAILED.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>XUnit : error : Tests failed: /app/diagnostics/artifacts/TestResults/Debug/SOS.UnitTests_netcoreapp2.0_x64.html ...
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>netcoreapp2.0|x64<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>/app/diagnostics/src/SOS/SOS.UnitTests/SOS.UnitTests.csproj<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span> Warning<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1</span> Error<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Time Elapsed 00:00:09.84
</span></span><span style="display:flex;"><span>Build failed <span style="color:#f92672">(</span>exit code <span style="color:#e6db74">&#39;1&#39;</span><span style="color:#f92672">)</span>.
</span></span></code></pre></div><p>Hmmm again.. it looks like it needs dotnet sdk v2.0 now. Ok, so let&rsquo;s try building and installing that now.</p>
<p>Let&rsquo;s use the latest patch version matching 2.0:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# git checkout v2.0.3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Previous HEAD position was 316fbdd... <span style="color:#f92672">[</span>release/3.0.1xx<span style="color:#f92672">]</span> Update dependencies from dotnet/core-setup <span style="color:#f92672">(</span><span style="color:#75715e">#4180)</span>
</span></span><span style="display:flex;"><span>HEAD is now at fc3e52d... Publish the SDK NuGet packages to the Transport Feed <span style="color:#f92672">(</span><span style="color:#75715e">#1687)</span>
</span></span></code></pre></div><p>And build our repository:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk# ./build.sh
</span></span><span style="display:flex;"><span>dotnet-install: Calling: machine_has curl
</span></span><span style="display:flex;"><span>dotnet-install: Calling: calculate_vars
</span></span><span style="display:flex;"><span>dotnet-install: Calling: get_normalized_architecture_from_architecture &lt;auto&gt;
</span></span><span style="display:flex;"><span>dotnet-install: Calling: get_machine_architecture
</span></span><span style="display:flex;"><span>dotnet-install: Calling: get_normalized_architecture_from_architecture x64
</span></span><span style="display:flex;"><span>dotnet-install: normalized_architecture<span style="color:#f92672">=</span>x64
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>2 hours later (well not quite), we can install our v2.0 sdk.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk/.dotnet# ./dotnet-install.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dotnet_install: Warning: Unable to locate zlib. Probable prerequisite missing; install zlib.
</span></span><span style="display:flex;"><span>dotnet-install: .NET Core SDK version 3.1.300 is already installed.
</span></span><span style="display:flex;"><span>dotnet-install: Adding to current process PATH: <span style="color:#e6db74">`</span>/root/.dotnet<span style="color:#e6db74">`</span>. Note: This change will be visible only when sourcing script.
</span></span><span style="display:flex;"><span>dotnet-install: Installation finished successfully.
</span></span></code></pre></div><p>So let&rsquo;s check it&rsquo;s listed with dotnet:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk/.dotnet# dotnet --list-sdks
</span></span><span style="display:flex;"><span>3.0.103 <span style="color:#f92672">[</span>/app/sdk/.dotnet/sdk<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>3.1.200-preview-014999 <span style="color:#f92672">[</span>/app/sdk/.dotnet/sdk<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>Well, that&rsquo;s strange. Where is it?</p>
<p>Let&rsquo;s have a look at our build log for a hint:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dotnet-install: Extracting zip from https://dotnetcli.azureedge.net/dotnet/Runtime/1.1.2/dotnet-ubuntu.16.04-x64.1.1.2.tar.gz
</span></span><span style="display:flex;"><span>dotnet-install: Adding to current process PATH: <span style="color:#e6db74">`</span>/app/sdk/.dotnet_cli<span style="color:#e6db74">`</span>. Note: This change will be visible only when sourcing script.
</span></span><span style="display:flex;"><span>dotnet-install: Installation finished successfully.
</span></span></code></pre></div><p>Ok, so it looks like it&rsquo;s installed in a different path so the two sdks can be installed side-by-side. Fair enough.</p>
<p>Let&rsquo;s go to that path and check the version:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/sdk/.dotnet_cli# ./dotnet --version
</span></span><span style="display:flex;"><span>2.0.2-vspre-006963
</span></span></code></pre></div><p>Ok, so version <code>v2.0.3</code> of the sdk is built from branch <code>2.0.2-vspre-006963</code>. Maybe this was before pre-release versions were tagged separately.</p>
<p>So let&rsquo;s try to run our diagnostics tests again.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# ./build.sh --test
</span></span><span style="display:flex;"><span>  Restore completed in 29.21 ms <span style="color:#66d9ef">for</span> /root/.nuget/packages/microsoft.dotnet.arcade.sdk/1.0.0-beta.19309.1/tools/Tools.proj.
</span></span><span style="display:flex;"><span>  Restore completed in 19.94 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Tools.RuntimeClient/Microsoft.Diagnostics.Tools.RuntimeClient
</span></span><span style="display:flex;"><span>.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 23.06 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.Repl/Microsoft.Diagnostics.Repl.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 25.67 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.TestHelpers/Microsoft.Diagnostics.TestHelpers.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 25.33 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/Microsoft.Diagnostics.DebugServices/Microsoft.Diagnostics.DebugServices.csproj.
</span></span><span style="display:flex;"><span>  Restore completed in 1.59 ms <span style="color:#66d9ef">for</span> /app/diagnostics/src/SOS/SOS.InstallHelper/SOS.InstallHelper.csproj.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Tests succeeded: /app/diagnostics/artifacts/bin/DotnetCounters.UnitTests/Debug/netcoreapp3.0/DotnetCounters.UnitTests.dll <span style="color:#f92672">[</span>netcoreapp3.0|x64<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Tests succeeded: /app/diagnostics/artifacts/bin/EventPipe.UnitTests/Debug/netcoreapp3.0/EventPipe.UnitTests.dll <span style="color:#f92672">[</span>netcoreapp3.0|x64<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>XUnit : error : Tests failed: /app/diagnostics/artifacts/TestResults/Debug/SOS.UnitTests_netcoreapp2.0_x64.html <span style="color:#f92672">[</span>netcoreapp2.0|x64<span style="color:#f92672">]</span> ...
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>/app/diagnostics/src/SOS/SOS.UnitTests/SOS.UnitTests.csproj<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Build FAILED.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>XUnit : error : Tests failed: /app/diagnostics/artifacts/TestResults/Debug/SOS.UnitTests_netcoreapp2.0_x64.html <span style="color:#f92672">[</span>netcoreapp2.0|x64<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>/app/diagnostics/src/SOS/SOS.UnitTests/SOS.UnitTests.csproj<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span> Warning<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1</span> Error<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Time Elapsed 00:00:10.65
</span></span><span style="display:flex;"><span>Build failed <span style="color:#f92672">(</span>exit code <span style="color:#e6db74">&#39;1&#39;</span><span style="color:#f92672">)</span>.
</span></span></code></pre></div><p>Hmmm.. still failing for the same reason. It probably doesn&rsquo;t know about sdk v2.0.</p>
<p>Let&rsquo;s dig a bit deeper into the error log:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics# cat /app/diagnostics/artifacts/TestResults/Debug/SOS.UnitTests_netcoreapp2.0_x64.html
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        00:00.390: <span style="color:#f92672">[</span>40m<span style="color:#f92672">[</span>32minfo<span style="color:#f92672">[</span>39m<span style="color:#f92672">[</span>22m<span style="color:#f92672">[</span>49m: Microsoft.AspNetCore.Routing.EndpointMiddleware<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        00:00.390:       Executing endpoint <span style="color:#e6db74">&#39;/ HTTP: GET&#39;</span>
</span></span><span style="display:flex;"><span>        00:00.395: Connecting to pipe SOSRunner.37508.WebApp3
</span></span><span style="display:flex;"><span>        Running Process: /app/diagnostics/.dotnet/dotnet /app/diagnostics/artifacts/bin/dotnet-dump/Debug/netcoreapp2.1/publish/dotnet-dump.dll ...
</span></span><span style="display:flex;"><span>           collect --process-id <span style="color:#ae81ff">37656</span> --output /app/diagnostics/artifacts/tmp/Debug/dumps/ProjectK/3.0.0/netcoreapp3.0/WebApp3.Heap.dmp
</span></span><span style="display:flex;"><span>        Working Directory:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            00:00.219: Writing minidump with heap to /app/diagnostics/artifacts/tmp/Debug/dumps/ProjectK/3.0.0/netcoreapp3.0/WebApp3.Heap.dmp
</span></span><span style="display:flex;"><span>        00:03.947: Writing minidump with heap to file /app/diagnostics/artifacts/tmp/Debug/dumps/ProjectK/3.0.0/netcoreapp3.0/WebApp3.Heap.dmp
</span></span><span style="display:flex;"><span>        00:03.947: Written <span style="color:#ae81ff">188710912</span> bytes <span style="color:#f92672">(</span><span style="color:#ae81ff">46072</span> pages<span style="color:#f92672">)</span> to core file
</span></span><span style="display:flex;"><span>            00:03.550: Complete
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        Exit code: <span style="color:#ae81ff">0</span> <span style="color:#f92672">(</span> 00:03.560 elapsed<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        Killing process: 00:03.961: Kill<span style="color:#f92672">()</span> was called
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    Exit code: <span style="color:#ae81ff">137</span> <span style="color:#f92672">(</span> 00:03.975 elapsed<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>   SOSRunner processing SOS.WebApp3
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>   System.IO.FileNotFoundException: Native debugger path not set or does not exist:
</span></span><span style="display:flex;"><span>   at SOSRunner.StartDebugger<span style="color:#f92672">(</span>TestInformation information, DebuggerAction action<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOSRunner.cs:line <span style="color:#ae81ff">413</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>It looks like one of the tests is running a process:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/app/diagnostics/.dotnet/dotnet /app/diagnostics/artifacts/bin/dotnet-dump/Debug/netcoreapp2.1/publish/dotnet-dump.dll ...
</span></span><span style="display:flex;"><span>collect --process-id <span style="color:#ae81ff">37656</span> --output /app/diagnostics/artifacts/tmp/Debug/dumps/ProjectK/3.0.0/netcoreapp3.0/WebApp3.Heap.dmp
</span></span></code></pre></div><p>So firstly, let&rsquo;s try running that single project&rsquo;s tests:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# cd /app/diagnostics/src/SOS/SOS.UnitTests
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# dotnet test
</span></span><span style="display:flex;"><span>Test run <span style="color:#66d9ef">for</span> /app/diagnostics/artifacts/bin/SOS.UnitTests/Debug/netcoreapp2.0/SOS.UnitTests.dll<span style="color:#f92672">(</span>.NETCoreApp,Version<span style="color:#f92672">=</span>v2.0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Microsoft <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> Test Execution Command Line Tool Version 16.3.0
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> Microsoft Corporation.  All rights reserved.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Starting test execution, please wait...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>A total of <span style="color:#ae81ff">1</span> test files matched the specified pattern.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>xUnit.net 00:00:00.85<span style="color:#f92672">]</span>     SOS.TaskNestedException<span style="color:#f92672">(</span>config: projectk.sdk.prebuilt.5.0.0-alpha.1.19564.1<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>FAIL<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  X SOS.LLDBPluginTests<span style="color:#f92672">(</span>config: projectk.sdk.prebuilt.3.0.0<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>3ms<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Error Message:
</span></span><span style="display:flex;"><span>   System.ArgumentException : LLDB_PATH environment variable not set
</span></span><span style="display:flex;"><span>  Stack Trace:
</span></span><span style="display:flex;"><span>     at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">245</span>
</span></span><span style="display:flex;"><span>--- End of stack trace from previous location where exception was thrown ---
</span></span><span style="display:flex;"><span>  Standard Output Messages:
</span></span><span style="display:flex;"><span> Starting SOS.LLDBPluginTests
</span></span><span style="display:flex;"><span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> System.ArgumentException: LLDB_PATH environment variable not set
</span></span><span style="display:flex;"><span>    at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">245</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>X SOS.LLDBPluginTests<span style="color:#f92672">(</span>config: projectk.sdk.prebuilt.2.1.14<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>6ms<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Error Message:
</span></span><span style="display:flex;"><span>   System.ArgumentException : LLDB_PATH environment variable not set
</span></span><span style="display:flex;"><span>  Stack Trace:
</span></span><span style="display:flex;"><span>     at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">245</span>
</span></span><span style="display:flex;"><span>--- End of stack trace from previous location where exception was thrown ---
</span></span><span style="display:flex;"><span>  Standard Output Messages:
</span></span><span style="display:flex;"><span> Starting SOS.LLDBPluginTests
</span></span><span style="display:flex;"><span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> System.ArgumentException: LLDB_PATH environment variable not set
</span></span><span style="display:flex;"><span>    at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">245</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Test Run Failed.
</span></span><span style="display:flex;"><span>Total tests: <span style="color:#ae81ff">47</span>
</span></span><span style="display:flex;"><span>     Failed: <span style="color:#ae81ff">47</span>
</span></span><span style="display:flex;"><span> Total time: 9.8197 Seconds
</span></span></code></pre></div><p>Ohhh.. everything failed that time.. Hmmm..</p>
<p>Well, what is the error then?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>  Error Message:
</span></span><span style="display:flex;"><span>  System.ArgumentException : LLDB_PATH environment variable not set
</span></span><span style="display:flex;"><span> Stack Trace:
</span></span><span style="display:flex;"><span>    at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">245</span>
</span></span><span style="display:flex;"><span>--- End of stack trace from previous location where exception was thrown ---
</span></span></code></pre></div><p>Ah, it looks like there is a dependency on lldb.</p>
<p>Let&rsquo;s look at the offending file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# cat -n SOS.cs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">244</span>              // Get lldb path
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">245</span>              arguments.AppendFormat<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;--lldb {0} &#34;</span>, Environment.GetEnvironmentVariable<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LLDB_PATH&#34;</span><span style="color:#f92672">)</span> ?? ...
</span></span><span style="display:flex;"><span>       throw new ArgumentException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LLDB_PATH environment variable not set&#34;</span><span style="color:#f92672">))</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>Does it just need to be set? Let&rsquo;s try.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# export LLDB_PATH
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# dotnet test
</span></span><span style="display:flex;"><span>Test run <span style="color:#66d9ef">for</span> /app/diagnostics/artifacts/bin/SOS.UnitTests/Debug/netcoreapp2.0/SOS.UnitTests.dll<span style="color:#f92672">(</span>.NETCoreApp,Version<span style="color:#f92672">=</span>v2.0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Microsoft <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> Test Execution Command Line Tool Version 16.3.0
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> Microsoft Corporation.  All rights reserved.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Starting test execution, please wait...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  X SOS.LLDBPluginTests<span style="color:#f92672">(</span>config: projectk.sdk.prebuilt.2.1.14<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>52ms<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Error Message:
</span></span><span style="display:flex;"><span>   System.Exception : Process returned exit code 2, expected <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Command Line: /usr/bin/python /app/diagnostics/src/SOS/lldbplugin.tests/test_libsosplugin.py --lldb
</span></span><span style="display:flex;"><span>--host <span style="color:#e6db74">&#34;/app/diagnostics/.dotnet/dotnet --fx-version 2.1.14 &#34;</span> --plugin /app/diagnostics/artifacts/bin/Linux.x64.Debug/libsosplugin.so
</span></span><span style="display:flex;"><span>--logfiledir /app/diagnostics/artifacts/TestResults/Debug/sos.unittests_2020_05_29_01_35_52_2983/2.1.14
</span></span><span style="display:flex;"><span>--assembly /app/diagnostics/artifacts/bin/TestDebuggee/Debug/netcoreapp2.1/TestDebuggee.dll
</span></span><span style="display:flex;"><span>Working Directory: /app/diagnostics/src/SOS/lldbplugin.tests
</span></span><span style="display:flex;"><span>  Stack Trace:
</span></span><span style="display:flex;"><span>     at Microsoft.Diagnostics.TestHelpers.ProcessRunner.InternalWaitForExit<span style="color:#f92672">(</span>Task<span style="color:#e6db74">`</span><span style="color:#ae81ff">1</span> startProcessTask, Task stdOutTask, Task stdErrTask<span style="color:#f92672">)</span> in
</span></span><span style="display:flex;"><span>     /app/diagnostics/src/Microsoft.Diagnostics.TestHelpers/ProcessRunner.cs:line <span style="color:#ae81ff">436</span>
</span></span><span style="display:flex;"><span>   at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">286</span>
</span></span><span style="display:flex;"><span>--- End of stack trace from previous location where exception was thrown ---
</span></span><span style="display:flex;"><span>  Standard Output Messages:
</span></span><span style="display:flex;"><span> Starting SOS.LLDBPluginTests
</span></span><span style="display:flex;"><span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>     Running Process: /usr/bin/python /app/diagnostics/src/SOS/lldbplugin.tests/test_libsosplugin.py --lldb
</span></span><span style="display:flex;"><span>     --host <span style="color:#e6db74">&#34;/app/diagnostics/.dotnet/dotnet --fx-version 2.1.14 &#34;</span> --plugin /app/diagnostics/artifacts/bin/Linux.x64.Debug/libsosplugin.so
</span></span><span style="display:flex;"><span>     --logfiledir /app/diagnostics/artifacts/TestResults/Debug/sos.unittests_2020_05_29_01_35_52_2983/2.1.14 --assembly
</span></span><span style="display:flex;"><span>     /app/diagnostics/artifacts/bin/TestDebuggee/Debug/netcoreapp2.1/TestDebuggee.dll
</span></span><span style="display:flex;"><span>     Working Directory: /app/diagnostics/src/SOS/lldbplugin.tests
</span></span><span style="display:flex;"><span>     Additional Environment Variables: COMPlus_LogFacility<span style="color:#f92672">=</span>0xffffffbf, COMPlus_LogLevel<span style="color:#f92672">=</span>6, COMPlus_StressLog<span style="color:#f92672">=</span>1, COMPlus_StressLogSize<span style="color:#f92672">=</span><span style="color:#ae81ff">65536</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>         STDERROR: 00:00.032: usage: test_libsosplugin.py <span style="color:#f92672">[</span>-h<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--lldb LLDB<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--host HOST<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--plugin PLUGIN<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>         STDERROR: 00:00.032:                             <span style="color:#f92672">[</span>--logfiledir LOGFILEDIR<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--assembly ASSEMBLY<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>         STDERROR: 00:00.032:                             <span style="color:#f92672">[</span>--timeout TIMEOUT<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--regex REGEX<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>         STDERROR: 00:00.032:                             <span style="color:#f92672">[</span>--repeat REPEAT<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>         STDERROR: 00:00.032:                             <span style="color:#f92672">[</span>unittest_args <span style="color:#f92672">[</span>unittest_args ...<span style="color:#f92672">]]</span>
</span></span><span style="display:flex;"><span>         STDERROR: 00:00.032: test_libsosplugin.py: error: argument --lldb: expected one argument
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>     Exit code: <span style="color:#ae81ff">2</span> <span style="color:#f92672">(</span> 00:00.036 elapsed<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> System.Exception: Process returned exit code 2, expected <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span> Command Line: /usr/bin/python /app/diagnostics/src/SOS/lldbplugin.tests/test_libsosplugin.py --lldb
</span></span><span style="display:flex;"><span> --host <span style="color:#e6db74">&#34;/app/diagnostics/.dotnet/dotnet --fx-version 2.1.14 &#34;</span> --plugin /app/diagnostics/artifacts/bin/Linux.x64.Debug/libsosplugin.so --logfiledir
</span></span><span style="display:flex;"><span> /app/diagnostics/artifacts/TestResults/Debug/sos.unittests_2020_05_29_01_35_52_2983/2.1.14 --assembly
</span></span><span style="display:flex;"><span> /app/diagnostics/artifacts/bin/TestDebuggee/Debug/netcoreapp2.1/TestDebuggee.dll
</span></span><span style="display:flex;"><span> Working Directory: /app/diagnostics/src/SOS/lldbplugin.tests
</span></span><span style="display:flex;"><span>    at Microsoft.Diagnostics.TestHelpers.ProcessRunner.InternalWaitForExit<span style="color:#f92672">(</span>Task<span style="color:#e6db74">`</span><span style="color:#ae81ff">1</span> startProcessTask, Task stdOutTask, Task stdErrTask<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    in /app/diagnostics/src/Microsoft.Diagnostics.TestHelpers/ProcessRunner.cs:line <span style="color:#ae81ff">436</span>
</span></span><span style="display:flex;"><span>    at SOS.LLDBPluginTests<span style="color:#f92672">(</span>TestConfiguration config<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs:line <span style="color:#ae81ff">286</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Test Run Failed.
</span></span><span style="display:flex;"><span>Total tests: <span style="color:#ae81ff">47</span>
</span></span><span style="display:flex;"><span>     Failed: <span style="color:#ae81ff">47</span>
</span></span><span style="display:flex;"><span> Total time: 9.6904 Seconds
</span></span></code></pre></div><p>It does need to be set, but now we get another error later on:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# cat -n /app/diagnostics/src/SOS/SOS.UnitTests/SOS.cs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">285</span>              // Wait <span style="color:#66d9ef">for</span> the debuggee to finish
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">286</span>              await processRunner.WaitForExit<span style="color:#f92672">()</span>;
</span></span></code></pre></div><p>So, this looks like a bit of a dead-end and we should probably install lldb and see if that resolves it.</p>
<p>But, what version of lldb should we install? Let&rsquo;s try the default version (lldb-8).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# apt-get update -y <span style="color:#f92672">&amp;&amp;</span> apt-get install -y llvm-8 lldb-8
</span></span><span style="display:flex;"><span>Hit:2 http://security.ubuntu.com/ubuntu xenial-security InRelease
</span></span><span style="display:flex;"><span>Hit:3 http://archive.ubuntu.com/ubuntu xenial InRelease
</span></span><span style="display:flex;"><span>Hit:4 http://archive.ubuntu.com/ubuntu xenial-updates InRelease
</span></span><span style="display:flex;"><span>Hit:5 https://apt.kitware.com/ubuntu xenial InRelease
</span></span><span style="display:flex;"><span>Hit:6 http://archive.ubuntu.com/ubuntu xenial-backports InRelease
</span></span><span style="display:flex;"><span>Hit:1 https://apt.llvm.org/xenial llvm-toolchain-xenial-9 InRelease
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Preparing to unpack .../lldb-8_1%3a8-3~ubuntu16.04.1_amd64.deb ...
</span></span><span style="display:flex;"><span>Unpacking lldb-8 <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Processing triggers <span style="color:#66d9ef">for</span> libc-bin <span style="color:#f92672">(</span>2.23-0ubuntu11<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up libllvm8:amd64 <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up liblldb-8 <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up llvm-8-runtime <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up llvm-8 <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up llvm-8-dev <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up python-lldb-8 <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Setting up lldb-8 <span style="color:#f92672">(</span>1:8-3~ubuntu16.04.1<span style="color:#f92672">)</span> ...
</span></span><span style="display:flex;"><span>Processing triggers <span style="color:#66d9ef">for</span> libc-bin <span style="color:#f92672">(</span>2.23-0ubuntu11<span style="color:#f92672">)</span> ...
</span></span></code></pre></div><p>Cool. So let&rsquo;s try again:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# export LLDB_PATH<span style="color:#f92672">=</span>/usr/bin/lldb-8
</span></span><span style="display:flex;"><span>root@85bd9fba8925:/app/diagnostics/src/SOS/SOS.UnitTests# dotnet test
</span></span><span style="display:flex;"><span>Test run <span style="color:#66d9ef">for</span> /app/diagnostics/artifacts/bin/SOS.UnitTests/Debug/netcoreapp2.0/SOS.UnitTests.dll<span style="color:#f92672">(</span>.NETCoreApp,Version<span style="color:#f92672">=</span>v2.0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Microsoft <span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> Test Execution Command Line Tool Version 16.3.0
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> Microsoft Corporation.  All rights reserved.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Starting test execution, please waitA total of <span style="color:#ae81ff">1</span> test files matched the specified pattern<span style="color:#f92672">[</span>xUnit.net 00:05:29.24<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  SOS.StackAndOtherTests<span style="color:#f92672">(</span>config: projectk.cli.5.0.0-alpha.1.19564.1<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">[</span>FAIL X SOS.StackAndOtherTests<span style="color:#f92672">(</span>config: projectk.cli.5.0.0-alpha.1.19564.1<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>39s 342ms<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Error Message:
</span></span><span style="display:flex;"><span>   Microsoft.Diagnostics.TestHelpers.TestStepException : The Build Debuggee test step failed.
</span></span><span style="display:flex;"><span>Original Error: Process returned exit code 1, expected <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Command Line: /app/diagnostics/.dotnet/dotnet restore --configfile /app/diagnostics/artifacts/Debuggees/embedded/SymbolTestApp/NuGet.config
</span></span><span style="display:flex;"><span>--packages <span style="color:#e6db74">&#34;/root/.nuget/packages&#34;</span> /p:RuntimeFrameworkVersion<span style="color:#f92672">=</span>3.0.0 /p:BuildProjectFramework<span style="color:#f92672">=</span>netcoreapp3.0 /p:DebugType<span style="color:#f92672">=</span>embedded
</span></span><span style="display:flex;"><span>Working Directory: /app/diagnostics/artifacts/Debuggees/embedded/SymbolTestApp
</span></span><span style="display:flex;"><span>   at Microsoft.Diagnostics.TestHelpers.ProcessRunner.InternalWaitForExit<span style="color:#f92672">(</span>Task<span style="color:#e6db74">`</span><span style="color:#ae81ff">1</span> startProcessTask, Task stdOutTask, Task stdErrTask<span style="color:#f92672">)</span> in /app
</span></span><span style="display:flex;"><span>/diagnostics/src/Microsoft.Diagnostics.TestHelpers/ProcessRunner.cs:line <span style="color:#ae81ff">436</span>
</span></span><span style="display:flex;"><span>at Microsoft.Diagnostics.TestHelpers.DotNetBuildDebuggeeTestStep.Restore<span style="color:#f92672">(</span>String extraArgs, ITestOutputHelper output<span style="color:#f92672">)</span> in /app/diagnostics/
</span></span><span style="display:flex;"><span>src/Microsoft.Diagnostics.TestHelpers/DotNetBuildDebuggeeTestStep.cs:line <span style="color:#ae81ff">208</span>
</span></span></code></pre></div><p>.. an hour passes&hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> SOSRunner processing SOS.Overflow
</span></span><span style="display:flex;"><span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> System.IO.FileNotFoundException: Native debugger path not set or does not exist:
</span></span><span style="display:flex;"><span>    at SOSRunner.StartDebugger<span style="color:#f92672">(</span>TestInformation information, DebuggerAction action<span style="color:#f92672">)</span> in /app/diagnostics/src/SOS/SOS.UnitTests/SOSRunner.cs:line <span style="color:#ae81ff">413</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>xUnit.net 00:08:44.29<span style="color:#f92672">]</span>     SOS.WebApp <span style="color:#f92672">[</span>FAIL X SOS.WebApp <span style="color:#f92672">[</span>1ms<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  Error Message:
</span></span><span style="display:flex;"><span>   System.InvalidOperationException : The test method expected <span style="color:#ae81ff">1</span> parameter value, but <span style="color:#ae81ff">0</span> parameter values were provided.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Test Run Failed.
</span></span><span style="display:flex;"><span>Total tests: <span style="color:#ae81ff">47</span>
</span></span><span style="display:flex;"><span>     Passed: <span style="color:#ae81ff">41</span>
</span></span><span style="display:flex;"><span>     Failed: <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span> Total time: 16.5891 Minutes
</span></span></code></pre></div><p>Ok, so only 6 out of 47 failed this time. That&rsquo;s some progress.</p>
<p>But why did the 6 fail? We&rsquo;ll look at that in the another blog post.</p>


        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="http://me.wvk.au/posts/understanding-dotnet-core-pdb-files/" data-toggle="tooltip" data-placement="top" title="Understanding Dotnet Core Pdb Files">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="http://me.wvk.au/posts/vim-plugin-development-workflows/" data-toggle="tooltip" data-placement="top" title="Vim Plugin Development Workflows">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
		
		  <a href="https://github.com/wilvk" title="GitHub">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://twitter.com/wilvk" title="Twitter">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://linkedin.com/in/willvk" title="LinkedIn">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Willem van Ketwich
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="http://me.wvk.au/">Will&#39;s Blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.124.1</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="http://me.wvk.au/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="http://me.wvk.au/js/load-photoswipe.js"></script>









    
  </body>
</html>

